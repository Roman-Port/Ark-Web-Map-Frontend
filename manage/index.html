<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Delta Map - Provider Hub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/manage/manage.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/manage/manage_pform.css" />
    <link rel="stylesheet" type="text/css" href="/assets/master.css" />
    <script src="/assets/manage/manage.js"></script>
    <script src="/assets/manage/manage_pform.js"></script>
</head>
<body>
    <div class="pform_area" id="pform_area">
        <table style="width: 100%; height:100%;">
            <tr>
                <td style="text-align: center; vertical-align: middle;" id="pform_area_link">
                </td>
            </tr>
        </table>
    </div>
    <div class="bottom_modal bottom_modal_error" id="bottom_modal"></div>
    <div class="top_bar">
        <div class="constrained">
            <div class="top_bar_section">
                <span class="title"><span class="title_big">Delta</span>WebMap</span>
            </div>
            <div class="top_bar_section" id="tab_top_0" onclick="main.chooseTab(0);">
                Servers
            </div>
            <div class="top_bar_section" id="tab_top_1" onclick="main.chooseTab(1);">
                Machines
            </div>
            <div class="top_bar_section" id="tab_top_2" onclick="main.chooseTab(2);">
                Clients
            </div>
            <div class="top_bar_section" id="tab_top_3" onclick="main.chooseTab(3);">
                API
            </div>
            <div class="top_bar_section top_bar_rightsection">
                <span id="me_name"></span><img src="" class="top_bar_profilepic" id="me_img">
            </div>
        </div>
    </div>
    <div class="content constrained">
        <!-- Servers -->
        <div class="content_tab" id="tab_content_0">
            <h1>Servers <div class="master_btn master_btn_blue master_btn_rtl" onclick="main.showServerEnrollForm();" style="float:right">Enroll New</div></h1>
            <p>Here, you can see all of the instances that are registered under this provider. You may link a server to a client, or add a new server here. For automatic enrolls, you should use the API.</p>

            <table style="width:100%" id="servers_table">
                <tr>
                    <th>Name</th>
                    <th>Client</th>
                    <th>Machine Name</th>
                    <th>Game</th>
                    <th>Map</th>
                    <th>Active</th>
                    <th>Manage</th>
                </tr>
                <tr>
                    <td>TestServer1</td> 
                    <td>RomanPort</td>
                    <td>US-East-1</td>
                    <td>ARK: Survival Evolved</td>
                    <td>Extinction</td>
                    <td>Yes</td>
                    <td><a href="javascript:">Manage</a></td>
                </tr>
            </table>
        </div>

        <!-- Machines -->
        <div class="content_tab" id="tab_content_1">
            <h1>Machines <div class="master_btn master_btn_blue master_btn_rtl" style="float:right" onclick="main.showMachineEnrollForm()">Enroll New</div></h1>
            <p>Here, you can see all of the physical machines that are running. Physical machines are considered to be each client that you download. Multiple servers can run on one physical machine.</p>

            <table style="width:100%" id="machines_table">
                <tr>
                    <th>Name</th>
                    <th>Location</th>
                    <th>Game</th>
                    <th>Active Servers</th>
                    <th>Active</th>
                    <th>Manage</th>
                </tr>
                <tr>
                    <td>US-East-1</td> 
                    <td>US East</td>
                    <td>ARK: Survival Evolved</td>
                    <td>1</td>
                    <td>Yes</td>
                    <td><a href="javascript:">Manage</a></td>
                </tr>
            </table>
        </div>

        <!-- Clients -->
        <div class="content_tab" id="tab_content_2">
            <h1>Clients <div class="master_btn master_btn_blue master_btn_rtl" style="float:right" onclick="main.showMachineEnrollForm()">Create New</div></h1>
            <p>Here, you can see all clients. Clients can be connected to DeltaWebMap users and allows them to edit DeltaWebMap settings for their servers. You can allow these clients to edit server settings.<br><br>You should create a client here for each of your users. Then, give them an invite code to their client so they can link it to their account.<br><br>To create an invite code, use the following format: <span class="code">https://ark.romanport.com/invite/#<span class="code_bracket">{code}</span></p>

            <table style="width:100%" id="clients_table">
                <tr>
                    <th>Name</th>
                    <th>ID</th>
                    <th>Invite Code</th>
                    <th>Active Servers</th>
                    <th>Manage</th>
                </tr>
            </table>
        </div>

        <!-- Clients -->
        <div class="content_tab" id="tab_content_3">
            <h1>Providers API</h1>
            <p>Here, you can view the documentation for the API and how to use it. </p>

            <h2>Introduction</h2>
            <p>The DeltaWebMap Providers API is used to automatically manage servers. You can deploy it in your backend to create servers on the fly for clients.</p>

            <h3>Authentication</h3>
            <p>The API uses an API token for authentication. To authorize requests, attach an <span class="code">X-Api-Token</span> header with the following value.</p><div class="code_block api_token" id="api_token"></div><p>This is your API token. You should keep it secret. If you need to reset it, <a href="javascript:main.promptResetApiToken();">click here</a>.</p>

            <h3>Machines, Servers, and Clients</h3>
            <p>There are three main entities that are used by the DeltaWebMap Providers API.</p>
            <ul>
                <li><b>Machines: </b>Machines are each installation of the DeltaWebMap client software. You'll need to register a machine in our database every time you deploy a new machine with the DeltaWebMap client service running on it.</li>
                <li><b>Servers: </b>Servers are each instance of a DeltaWebMap server. A server should be created for every game server. Each server appears to the user as their own game server, and requires the pathname and map to the server save file. Servers can be enrolled into a machine and will automatically start.</li>
                <li><b>Clients: </b>Clients represent each client registered under your service. Clients can manage the DeltaWebMap server and change it's public settings, such as the name, icon, and server listing. Clients can link their client account to a DeltaWebMap account to edit these settings. These are optional, and can be linked to servers.</li>
            </ul>

            <h2>Setting Up New Machines</h2>
            <p>When you add a new machine or virtual machine to your game server network, you'll need to install our client software onto the machine. This software only reads the game save file and processes it. It will never write to any game server files. The client software only needs access to the game save files, so it could be placed on another machine with a network drive mapped.</p>
            
            <h3>Registering the Machine</h3>
            <p>You'll need to obtain a machine ID before you get ready. To do that, create a machine in the "Machines" tab, or use the API.</p>

            <h3>Installing the Client Software</h3>
            <p>To begin, download the launcher software. <a href="/launcher/providers/windows.zip" target="_blank">Windows</a> or <a href="/launcher/providers/linux.zip" target="_blank">Linux</a>. Unzip the ZIP file to some location that will persistent and that the program has access to write to. In the location that the software was extracted to, create a <span class="code">providers_config.json</span> file. Open the file with a text editor and paste the following code into it.</p>
            <div class="code_block">
                {<br>
                    <indent1>"api_token":"<span class="api_token"></span>",<br></indent1>
                    <indent1>"machine_id":"<span class="code_bracket">{Server ID}</span>",<br></indent1>
                    <indent1>"version":0<br></indent1>
                }
            </div>
            <p>Replace <span class="code_bracket">{Server ID}</span> with the ID of the server you created earlier. Then, save the file. Then, create a service or add the software to startup. The binary you should execute is <span class="code">ArkWebMapLauncherProviders</span> on Linux, and <span class="code">ArkWebMapLauncherProviders.exe</span> on Windows.</p>
            <p>Your installation directory should look like this (Windows).</p>
            <img class="help_img" src="/assets/manage/docs/img/launcher_install_config.png">

            <!--<h2>API Reference</h2>
            <div class="ref_header"><div class="ref_header_type">GET</div><div class="ref_header_path">https://ark.romanport.com/api/providers/@me</div></div>-->
        </div>
    </div>

    <script>
        main.init();
    </script>
</body>
</html>